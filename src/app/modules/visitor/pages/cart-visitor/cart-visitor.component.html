<ion-header>
  <ion-row>
    <ion-col size="2"  (click)="goBackToLatestPage()" style="cursor: pointer;">
      <ion-icon size="large" name="chevron-back-outline"></ion-icon>
    </ion-col>
    <ion-col size="7">
      <h1>Shopping Cart</h1>
    </ion-col>
    <ion-col size="3">
      <ion-img src="assets/cart.png"></ion-img>
    </ion-col>
  </ion-row>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row *ngFor="let row of chunk(cartItems, 2)">
      <ng-container *ngFor="let product of row">
        <ion-col size-lg="6" size-md="6" size="12">
          <ion-item *ngIf="product.quantity !== 0" lines="full">
            <ion-thumbnail slot="start">
              <ion-img [src]="product.image"></ion-img>
              <ion-icon class="favorite" color="light" name="heart-sharp" (click)="addToFavorites()"></ion-icon>
            </ion-thumbnail>
            <ion-label>
              <ion-row>
                <ion-col size="7.8">
                  <h2>{{ product.name }}</h2>
                  <p class="brand">{{ product.brand }}</p>
                  <ion-row class="price-container"  *ngIf="product.discount !== '0.00'">
                    <ion-col size="5">
                      <p class="new-price">${{ product.price - (product.price * product.discount / 100) }}</p>
                    </ion-col>
                    <ion-col>
                      <p class="price">${{ product.price }}</p>
                    </ion-col>
                  </ion-row>
                  <ion-row class="price-container"  *ngIf="product.discount === '0.00'">
                    <ion-col>
                      <p class="new-price">${{ product.price }}</p>
                    </ion-col>
                  </ion-row>
                </ion-col>
                <ion-col size="4.2" class="left-panier">
                  <ion-row *ngIf="product.quantity > 0" class="product-panier">
                    <ion-button color="danger" expand="block" class="cart-button-red" (click)="decrementItem(product)">-</ion-button>
                    {{ product.quantity }}
                    <ion-button color="success" expand="block" class="cart-button-green" (click)="incrementItem(product)">+</ion-button>
                  </ion-row>
                </ion-col>
              </ion-row>
              <ion-row class="rating">
                <ion-col size="5.5">
                  <app-star-rating [(rating)]="product.rating"></app-star-rating>
                </ion-col>
                <ion-col size="0.5" class="color-text">
                  <h1>|</h1>
                </ion-col>
                <ion-col size="3.5" class="color-text">
                  <p>({{ product.total_reviews }} client)</p>
                </ion-col>
                <ion-col size="1.5">
                  <ion-badge class="discount">
                  <p *ngIf="product.discount !== '0.00'" >{{ formatDiscount(product.discount) }}%</p>
                </ion-badge>
              </ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
        </ion-col>
      </ng-container>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <p class="total">Total:</p>
  <div class="total-price">
    <p class="price">${{ getTotalSum() }}</p>
    <p class="new-price">${{ getTotalSumDiscount() }}</p>
  </div>
  <ion-button>
    Checkout
    <ion-icon name="arrow-forward-outline" slot="end"></ion-icon>
  </ion-button>
</ion-footer>


